<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sailing Platform - Olympic 49er Campaign Manager</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="spinner"></div>
        <p>Setting sail...</p>
    </div>

    <!-- Auth Container (Login/Register) -->
    <div id="auth-container" class="auth-container hidden">
        <div class="auth-card">
            <div class="auth-header">
                <h1>⛵ Sailing Platform</h1>
                <p>Olympic 49er Campaign Manager</p>
            </div>

            <!-- Login Form -->
            <form id="login-form" class="auth-form">
                <h2>Welcome Back</h2>
                <div class="form-group">
                    <label for="login-username">Username</label>
                    <input type="text" id="login-username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Sign In</button>
                <p class="auth-switch">
                    Don't have an account?
                    <a href="#" id="show-register">Create one</a>
                </p>
            </form>

            <!-- Register Form -->
            <form id="register-form" class="auth-form hidden">
                <h2>Create Account</h2>
                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input type="email" id="register-email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="register-username">Username</label>
                    <input type="text" id="register-username" name="username" required minlength="3">
                </div>
                <div class="form-group">
                    <label for="register-password">Password</label>
                    <input type="password" id="register-password" name="password" required minlength="6">
                </div>
                <button type="submit" class="btn btn-primary">Create Account</button>
                <p class="auth-switch">
                    Already have an account?
                    <a href="#" id="show-login">Sign in</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app-container" class="app-container hidden">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-brand">
                <span class="nav-icon">⛵</span>
                <span class="nav-title">Sailing Platform</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#" data-page="dashboard" class="nav-link active">Dashboard</a></li>
                <li><a href="#" data-page="sessions" class="nav-link">Sessions</a></li>
                <li><a href="#" data-page="equipment" class="nav-link">Equipment</a></li>
                <li><a href="#" data-page="analytics" class="nav-link">Analytics</a></li>
            </ul>
            <div class="nav-user">
                <span id="user-display" class="user-name"></span>
                <button id="logout-btn" class="btn btn-secondary btn-sm">Logout</button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page">
                <div class="page-header">
                    <h1>Dashboard</h1>
                    <p>Welcome to your sailing campaign manager</p>
                </div>

                <div class="dashboard-grid">
                    <!-- Quick Stats -->
                    <div class="dashboard-card stats-card">
                        <h3>Quick Stats</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-value" id="total-sessions">0</span>
                                <span class="stat-label">Total Sessions</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="total-hours">0</span>
                                <span class="stat-label">Hours on Water</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="avg-performance">0</span>
                                <span class="stat-label">Avg Performance</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="active-equipment">0</span>
                                <span class="stat-label">Active Equipment</span>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Sessions -->
                    <div class="dashboard-card recent-sessions">
                        <h3>Recent Sessions</h3>
                        <div id="recent-sessions-list" class="sessions-list">
                            <!-- Sessions will be loaded here -->
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="dashboard-card quick-actions">
                        <h3>Quick Actions</h3>
                        <button class="btn btn-primary" id="quick-new-session">
                            <span class="btn-icon">+</span> New Session
                        </button>
                        <button class="btn btn-secondary" id="quick-new-equipment">
                            <span class="btn-icon">+</span> Add Equipment
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sessions Page -->
            <div id="sessions-page" class="page hidden">
                <div class="page-header">
                    <h1>Sailing Sessions</h1>
                    <button class="btn btn-primary" id="new-session-btn">
                        <span class="btn-icon">+</span> New Session
                    </button>
                </div>

                <!-- Filters -->
                <div class="filters-bar">
                    <input type="text" id="session-search" placeholder="Search sessions..." class="search-input">
                    <select id="location-filter" class="filter-select">
                        <option value="">All Locations</option>
                    </select>
                    <select id="wave-filter" class="filter-select">
                        <option value="">All Wave Types</option>
                    </select>
                    <input type="date" id="date-from" class="filter-date">
                    <input type="date" id="date-to" class="filter-date">
                </div>

                <!-- Sessions List -->
                <div id="sessions-list" class="sessions-grid">
                    <!-- Sessions will be loaded here -->
                </div>
            </div>

            <!-- Equipment Page -->
            <div id="equipment-page" class="page hidden">
                <div class="page-header">
                    <h1>Equipment</h1>
                    <button class="btn btn-primary" id="new-equipment-btn">
                        <span class="btn-icon">+</span> Add Equipment
                    </button>
                </div>

                <!-- Equipment tabs -->
                <div class="tabs">
                    <button class="tab-btn active" data-tab="active">Active</button>
                    <button class="tab-btn" data-tab="retired">Retired</button>
                    <button class="tab-btn" data-tab="all">All</button>
                </div>

                <!-- Equipment Grid -->
                <div id="equipment-grid" class="equipment-grid">
                    <!-- Equipment will be loaded here -->
                </div>
            </div>

            <!-- Analytics Page -->
            <div id="analytics-page" class="page hidden">
                <div class="page-header">
                    <h1>Performance Analytics</h1>
                    <div class="date-range-selector">
                        <input type="date" id="analytics-from" class="filter-date">
                        <span>to</span>
                        <input type="date" id="analytics-to" class="filter-date">
                        <button class="btn btn-secondary" id="refresh-analytics">Refresh</button>
                    </div>
                </div>

                <div class="analytics-grid">
                    <!-- Performance by Conditions -->
                    <div class="analytics-card">
                        <h3>Performance by Conditions</h3>
                        <div id="conditions-chart" class="chart-container">
                            <!-- Chart will be rendered here -->
                        </div>
                    </div>

                    <!-- Sessions by Location -->
                    <div class="analytics-card">
                        <h3>Sessions by Location</h3>
                        <div id="locations-chart" class="chart-container">
                            <!-- Chart will be rendered here -->
                        </div>
                    </div>

                    <!-- Performance Trend -->
                    <div class="analytics-card full-width">
                        <h3>Performance Trend</h3>
                        <div id="trend-chart" class="chart-container">
                            <!-- Chart will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Session Modal -->
    <div id="session-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="session-modal-title">New Session</h2>
                <button class="modal-close">&times;</button>
            </div>
            <form id="session-form" class="modal-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="session-date">Date</label>
                        <input type="date" id="session-date" name="date" required>
                    </div>
                    <div class="form-group">
                        <label for="session-location">Location</label>
                        <input type="text" id="session-location" name="location" required>
                    </div>
                    <div class="form-group">
                        <label for="session-wind-min">Min Wind (knots)</label>
                        <input type="number" id="session-wind-min" name="wind_speed_min" step="0.1" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="session-wind-max">Max Wind (knots)</label>
                        <input type="number" id="session-wind-max" name="wind_speed_max" step="0.1" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="session-wave-type">Wave Type</label>
                        <select id="session-wave-type" name="wave_type" required>
                            <!-- Options will be loaded dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="session-wave-direction">Wave Direction</label>
                        <input type="text" id="session-wave-direction" name="wave_direction" required>
                    </div>
                    <div class="form-group">
                        <label for="session-hours">Hours on Water</label>
                        <input type="number" id="session-hours" name="hours_on_water" step="0.5" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="session-performance">Performance Rating</label>
                        <div class="rating-input">
                            <input type="range" id="session-performance" name="performance_rating" min="1" max="5" value="3">
                            <span class="rating-value">3</span>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label for="session-notes">Notes</label>
                        <textarea id="session-notes" name="notes" rows="3"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancel-session">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Session</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Equipment Modal -->
    <div id="equipment-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="equipment-modal-title">Add Equipment</h2>
                <button class="modal-close">&times;</button>
            </div>
            <form id="equipment-form" class="modal-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="equipment-name">Name</label>
                        <input type="text" id="equipment-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="equipment-type">Type</label>
                        <select id="equipment-type" name="type" required>
                            <!-- Options will be loaded dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="equipment-manufacturer">Manufacturer</label>
                        <input type="text" id="equipment-manufacturer" name="manufacturer" required>
                    </div>
                    <div class="form-group">
                        <label for="equipment-model">Model</label>
                        <input type="text" id="equipment-model" name="model" required>
                    </div>
                    <div class="form-group">
                        <label for="equipment-purchase-date">Purchase Date</label>
                        <input type="date" id="equipment-purchase-date" name="purchase_date">
                    </div>
                    <div class="form-group full-width">
                        <label for="equipment-notes">Notes</label>
                        <textarea id="equipment-notes" name="notes" rows="3"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancel-equipment">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Equipment</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/components.js"></script>
    <script src="js/pages/dashboard.js"></script>
    <script src="js/pages/sessions.js"></script>
    <script src="js/pages/equipment.js"></script>
    <script src="js/pages/analytics.js"></script>
    <script src="js/app.js"></script>
</body>
</html>